jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(n){return n=n||{},this.each(function(){this.tableDnDConfig={onDragStyle:n.onDragStyle,onDropStyle:n.onDropStyle,onDragClass:n.onDragClass?n.onDragClass:"tDnD_whileDrag",onDrop:n.onDrop,onDragStart:n.onDragStart,scrollAmount:n.scrollAmount?n.scrollAmount:5},jQuery.tableDnD.makeDraggable(this)}),jQuery(document).bind("mousemove",jQuery.tableDnD.mousemove).bind("mouseup",jQuery.tableDnD.mouseup),this},makeDraggable:function(n){for(var i=n.rows,r=n.tableDnDConfig,u,t=0;t<i.length;t++)u=$(i[t]).hasClass("nodrag"),u||jQuery(i[t]).mousedown(function(t){if(t.target.tagName=="TD"){if(jQuery.tableDnD.dragObject=this,jQuery.tableDnD.currentTable=n,jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,t),r.onDragStart)r.onDragStart(n,this);return!1}}).css("cursor","move")},mouseCoords:function(n){return n.pageX||n.pageY?{x:n.pageX,y:n.pageY}:{x:n.clientX+document.body.scrollLeft-document.body.clientLeft,y:n.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(n,t){t=t||window.event;var i=this.getPosition(n),r=this.mouseCoords(t);return{x:r.x-i.x,y:r.y-i.y}},getPosition:function(n){var t=0,i=0;for(n.offsetHeight==0&&(n=n.firstChild);n.offsetParent;)t+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;return t+n.offsetLeft,i+=n.offsetTop,{x:t,y:i}},mousemove:function(n){var s,f,i;if(jQuery.tableDnD.dragObject!=null){var e=jQuery(jQuery.tableDnD.dragObject),t=jQuery.tableDnD.currentTable.tableDnDConfig,o=jQuery.tableDnD.mouseCoords(n),r=o.y-jQuery.tableDnD.mouseOffset.y,u=window.pageYOffset;return document.all&&(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"?u=document.documentElement.scrollTop:typeof document.body!="undefined"&&(u=document.body.scrollTop)),o.y-u<t.scrollAmount?window.scrollBy(0,-t.scrollAmount):(s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight,s-(o.y-u)<t.scrollAmount&&window.scrollBy(0,t.scrollAmount)),r!=jQuery.tableDnD.oldY&&(f=r>jQuery.tableDnD.oldY,jQuery.tableDnD.oldY=r,t.onDragClass?e.addClass(t.onDragClass):e.css(t.onDragStyle),i=jQuery.tableDnD.findDropTargetRow(e,r),i&&(f&&jQuery.tableDnD.dragObject!=i?jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,i.nextSibling):f||jQuery.tableDnD.dragObject==i||jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,i))),!1}},findDropTargetRow:function(n,t){for(var f,s,u=jQuery.tableDnD.currentTable.rows,r=0;r<u.length;r++){var i=u[r],e=this.getPosition(i).y,o=parseInt(i.offsetHeight)/2;if(i.offsetHeight==0&&(e=this.getPosition(i.firstChild).y,o=parseInt(i.firstChild.offsetHeight)/2),t>e-o&&t<e+o)return i==n?null:(f=jQuery.tableDnD.currentTable.tableDnDConfig,f.onAllowDrop?f.onAllowDrop(n,i)?i:null:(s=$(i).hasClass("nodrop"),s?null:i))}return null},mouseup:function(){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){var t=jQuery.tableDnD.dragObject,n=jQuery.tableDnD.currentTable.tableDnDConfig;if(n.onDragClass?jQuery(t).removeClass(n.onDragClass):jQuery(t).css(n.onDropStyle),jQuery.tableDnD.dragObject=null,n.onDrop)n.onDrop(jQuery.tableDnD.currentTable,t);jQuery.tableDnD.currentTable=null}},serialize:function(){var n;if(jQuery.tableDnD.currentTable){var t="",r=jQuery.tableDnD.currentTable.id,i=jQuery.tableDnD.currentTable.rows;for(n=0;n<i.length;n++)t.length>0&&(t+="&"),t+=r+"[]="+i[n].id;return t}return"Error: No Table id set, you need to set an id on your table and every row"}},jQuery.fn.extend({tableDnD:jQuery.tableDnD.build});
//@ sourceMappingURL=jquery.tablednd.min.js.map